(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/suggest/suggest"],{"0500":function(o,t,e){"use strict";var n=e("a331"),i=e.n(n);i.a},"46a8":function(o,t,e){"use strict";e.r(t);var n=e("dabd"),i=e.n(n);for(var a in n)"default"!==a&&function(o){e.d(t,o,(function(){return n[o]}))}(a);t["default"]=i.a},"8ead":function(o,t,e){"use strict";var n,i=function(){var o=this,t=o.$createElement;o._self._c},a=[];e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return n}))},a331:function(o,t,e){},c41d:function(o,t,e){"use strict";e.r(t);var n=e("8ead"),i=e("46a8");for(var a in i)"default"!==a&&function(o){e.d(t,o,(function(){return i[o]}))}(a);e("0500");var s,c=e("f0c5"),l=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=l.exports},dabd:function(o,t,e){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(e("93f4"));function i(o){return o&&o.__esModule?o:{default:o}}var a={data:function(){return{imgList:[],imageIndex:0,index:null,complaintIndex:0,roomCloums:[],roomIdArr:[],roomName:"请选择",roomId:"",roomShow:!1,columns:["报修","建议","其他"],typeCds:["809001","809002"],typeName:"请选择",typeCd:"",typeShow:!1,photoList:[],tel:"",context:"",complaintName:"",userId:"",storeId:"",photos:[],communityId:"",isShow:!1}},onLoad:function(o){},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{ChooseImage:function(t){var e=this;o.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(t){console.log(JSON.stringify(t.tempFilePaths)),e.$data.imgList.push(t.tempFilePaths[0]);var i=o.uploadFile({url:n.default+"api/upload",filePath:t.tempFilePaths[0],name:"file",formData:{user:"test"},success:function(o){e.isShow=!1,e.photos.push(JSON.parse(o.data).data.fileUrl),console.log(e.photos)}});i.onProgressUpdate((function(o){e.isShow=!0,e.percent=o.progress,console.log("上传进度"+o.progress),console.log("已经上传的数据长度"+o.totalBytesSent),console.log("预期需要上传的数据总长度"+o.totalBytesExpectedToSend)}))}})},deleteImage:function(o){console.log(o);var t=this.$data.imgList;t.splice(o,1)},_changeComplaint:function(o){this.typeName=this.columns[o.detail.value],this.typeCd=this.typeCds[o.detail.value]},_changeRoom:function(o){this.roomName=this.roomCloums[o.detail.value],this.roomId=this.roomIdArr[o.detail.value]},bindInput:function(o){switch(console.log("数据监听",o),o.target.id){case"complaintName":this.$data.complaintName=o.detail.value;break;case"tel":this.$data.tel=o.detail.value;break;case"context":this.$data.context=o.detail.value;break}console.log(this)},bindOwner:function(t){var e={imgs:"",content:this.context,userid:o.getStorageSync("clientmessageid")},n=this.photos,i=[];n.forEach((function(o){i.push(o)}));var a="";console.log(i),e.imgs=i.join(","),""==e.context&&(a="请填写报修内容"),""!=a?wx.showToast({title:a,icon:"none",duration:2e3}):(console.log("提交数据",e),this.$api.saveComplaint(e).then((function(t){o.hideLoading(),200==t.code?o.redirectTo({url:"../mySuggest/mySuggest?id=".concat(o.getStorageSync("clientmessageid"))}):wx.showToast({title:t.msg,icon:"none",duration:2e3})})))},onChange:function(o){console.log(o)},onTypeConfirm:function(o){console.log("onConfirm",o),this.typeName=o.detail.value,this.typeCd=o.detail.index?"809001":"809002",this.typeShow=!1},onTypeCancel:function(o){this.typeShow=!1},chooseType:function(o){this.typeShow=!0},onRoomConfirm:function(o){console.log("onConfirm",o),this.roomName=o.detail.value,this.roomId=this.roomIdArr[o.detail.index],this.roomShow=!1},onRoomCancel:function(o){this.roomShow=!1},chooseRoom:function(o){this.roomShow=!0},afterRead:function(o){var t=o.detail.file,e=this,n=this.photoList,i=void 0===n?[]:n;i.push(t),this.photoList=i,factory.base64.urlTobase64(t.path).then((function(o){e.photos.push(o)})),console.log("data信息：",this)},removePhoto:function(o){console.log(o.detail.index);var t=[];this.photoList.forEach((function(e,n){n!=o.detail.index&&t.push(e)}));var e=[];this.photos.forEach((function(t,n){n!=o.detail.index&&e.push(t)})),this.photos=e,this.photoList=t}}};t.default=a}).call(this,e("543d")["default"])},e1a6:function(o,t,e){"use strict";(function(o){e("c95e");n(e("66fd"));var t=n(e("c41d"));function n(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,e("543d")["createPage"])}},[["e1a6","common/runtime","common/vendor"]]]);